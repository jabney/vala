!function(t){function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}var e={};n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=0)}([function(t,n,e){!function(t){"use strict";var n=e(1),r=e(2),a={host:".vala-host",cls:"vala",useTagData:!0,trimText:!0};t.fn.vala=function(e,o){function s(n){var e=this,a=document.getSelection();if(!a.isCollapsed){var s,i=a.getRangeAt(0),c=p++,f=r.rangeStartOffset(this,i),l=i.toString(),d=f+l.length;f>=0&&(s=o&&o.call(this,n,c,{start:f,end:d,str:l},function(n){e.innerHTML=u(t(e).text(),n)}),s&&"function"==typeof s.then?s.then(function(n){e.innerHTML=u(t(e).text(),n)}):Array.isArray(s)&&(this.innerHTML=u(t(this).text(),s)))}}function u(t,e){return l.trimText&&(t=t.trim()),n(t,e,l.cls)}function i(){f.find(l.host).each(function(n){t(this).off("mouseup",s),t(this).on("mouseup",s)})}function c(){t(l.host+"[data-vala]").each(function(){const e=JSON.parse(this.dataset.vala);Array.isArray(e)&&(this.innerHTML=n(t(this).text(),e,l.cls))})}var f=this,l=t.extend({},a,e||{}),p=0;return l.useTagData&&c(),i(),{render:function(t,e,r){return n(t,e,r)},unbind:function(){f.find(l.host).each(function(){t(this).off("mouseup")})},processTagData:c,monitor:i}},t.fn.vala.defaults=a}(jQuery)},function(t,n,e){"use strict";function r(t,n,e){if(!Array.isArray(n)||!n.length)return t;e=void 0===e?"vala":e;var r=[];return n.map(function(t,n){return[{pos:t.start,tag:t.tag,cls:t.cls,attrs:t.attrs,data:t.data,group:n},{pos:t.end||t.start+t.length,group:n}]}).reduce(function(t,n){return t.push(n[0],n[1]),t},[]).sort(function(t,n){return t.pos-n.pos}).reduce(function(n,o,s,u){if(r[o.group]?delete r[o.group]:r[o.group]=o,0===s&&o.pos>0&&n.push(t.slice(0,o.pos)),s<u.length-1){var i=t.slice(u[s].pos,u[s+1].pos);i&&n.push(r.reduce(function(t,n){return a(t,n,e)},i))}return s===u.length-1&&o.pos<t.length&&n.push(t.slice(o.pos,t.length)),n},[]).join("")}function a(t,n,e){var r=n.tag||"span",a="<#{tag}#{attrs}#{data}>"+t+"</"+r+">",o=((e||"")+" "+(n.cls||"")).trim(),s=Object.keys(n.attrs||{}).reduce(function(t,e){return t+" "+e+'="'+n.attrs[e]+'"'},""),u=Object.keys(n.data||{}).reduce(function(t,e){return t+" data-"+e+'="'+n.data[e]+'"'},"");return a.replace("#{tag}",o?r+' class="'+o+'"':r).replace("#{attrs}",s).replace("#{data}",u)}t.exports=r},function(t,n){function e(t,n){for(var e,r,a=[t],o=0;a.length;){if((e=a.pop())===n.startContainer)return o+n.startOffset;e.nodeType===Node.TEXT_NODE?o+=e.nodeValue.length:e.nodeType===Node.ELEMENT_NODE&&(r=Array.prototype.slice.call(e.childNodes,0),a=a.concat(r.reverse()))}return-1}t.exports={rangeStartOffset:e}}]);